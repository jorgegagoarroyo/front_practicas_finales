{"version":3,"file":"js/599.8496e556.js","mappings":"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","sources":["webpack://vue_practicas/./src/views/ListaView.vue","webpack://vue_practicas/./src/components/ListaDatos.vue","webpack://vue_practicas/./src/components/ListaDatos.vue?5c73","webpack://vue_practicas/./src/views/ListaView.vue?3fc7"],"sourcesContent":["<template>\r\n  <!-- <div class=\"row\" v-if=\"s_tabla\" :key=\"s_tabla\"> -->\r\n  <div class=\"row\" :key=\"s_tabla\">\r\n    <div class=\"col\">\r\n        <lista-datos :tabla=\"s_tabla.nombre\" :editar=\"s_tabla.editar\" :borrar=\"s_tabla.borrar\"/>\r\n        <!-- <lista-datos :tabla=\"tabla\" :editar=\"editar\" :borrar=\"borrar\"/> -->\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport ListaDatos from '../components/ListaDatos.vue'\r\n\r\nexport default {\r\n  name: 'ListaView',\r\n  data () {\r\n    return {\r\n      s_tabla: false\r\n    }\r\n  },\r\n  props: {\r\n    tabla: { default: '' },\r\n    editar: { default: false },\r\n    borrar: { default: false }\r\n  },\r\n  methods: {\r\n    load () {\r\n      // console.log('lista view ', this.tabla)\r\n      // const tablas = { nombre: this.tabla, editar: false, borrar: false }\r\n      const tablas = { nombre: this.tabla, editar: this.editar, borrar: this.borrar }\r\n      // if (this.editar) {\r\n      //   tablas.editar = true\r\n      // }\r\n      // if (this.borrar) {\r\n      //   tablas.borrar = true\r\n      // }\r\n      this.s_tabla = tablas\r\n      // console.log('s_tabla ', this.s_tabla)\r\n      // console.log(this.tabla)\r\n      // console.log(this.editar)\r\n      // console.log(this.borrar)\r\n    }\r\n  },\r\n  async mounted () {\r\n    this.load()\r\n  },\r\n  components: {\r\n    ListaDatos\r\n  },\r\n  watch: {\r\n    tabla: function () {\r\n      this.load()\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n\r\n</style>\r\n","<template>\r\n<div class=\"container\" :key=\"token\">\r\n  <!-- <div class=\"row\"> -->\r\n    <!-- <div class=\"table table-borderer\">{{tabla}}</div>\r\n  </div> -->\r\n  <div class=\"row\" >\r\n    <div class=\"col m-2\">\r\n      <button v-if=\"creador\" class=\"btn btn-secondary col-2\" @click=\"editar_elemento(dato)\">Agregar {{elemento_nombre}}</button>\r\n    </div>\r\n  </div>\r\n    <div class=\"row\">\r\n        <table class=\"table table-bordered\">\r\n            <thead>\r\n                <tr>\r\n                    <template v-for=\"(titulo, index) in titulos\" >\r\n                      <template v-if=\"titulo !== 'id'\">\r\n                        <th :key='index'>\r\n                          {{titulo}}\r\n                        </th>\r\n                      </template>\r\n                    </template>\r\n                    <th v-if=\" edits || deletes\"></th>\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                <tr v-for=\"(dato, index) in datos\" :key=\"index\">\r\n                  <template v-for=\"(titulo, index) in titulos\">\r\n                    <template v-if=\"titulo !== 'id'\">\r\n                      <td class=\"col\" :key='index'>  {{dato[titulo]}}  </td>\r\n                    </template>\r\n                  </template>\r\n                    <!-- <td class='col' v-for=\"(titulo, index) in titulos\" :key='index'>  {{dato[titulo]}}  </td> -->\r\n                    <!-- <td v-show='edit' class='bg-primary rounded border col-1 ' > editar </td>\r\n                    <td v-show='dele' class='bg-danger rounded col-1'> eliminar </td> -->\r\n                    <td class='col-2' v-if=\" edits || deletes\">\r\n                        <button v-show='edits' class='bg-primary rounded m-2 p-1' @click=\"editar_elemento(dato)\">editar</button>\r\n                        <button v-show='deletes' class='bg-danger rounded m-2 p-1' @click=\"eliminar_elemento(dato)\">eliminar</button>\r\n                    </td>\r\n                </tr>\r\n            </tbody>\r\n        </table>\r\n    </div>\r\n</div>\r\n</template>\r\n\r\n<script>\r\n\r\nexport default {\r\n  name: 'ListaDatos',\r\n  props: {\r\n    tabla: { required: true },\r\n    editar: { default: false },\r\n    borrar: { default: false }\r\n  },\r\n  data () {\r\n    return {\r\n      edits: false,\r\n      deletes: false,\r\n      titulos: [],\r\n      datos: [],\r\n      token: '',\r\n      elemento_nombre: '',\r\n      creador: false\r\n    }\r\n  },\r\n  methods: {\r\n    async leer_elementos () {\r\n      const uri = `https://fp-control.herokuapp.com/api/${this.tabla}/get`\r\n      // console.log(uri)\r\n      let temp = await fetch(uri, {\r\n        method: 'POST',\r\n        headers: {\r\n          authorization: `bearer ${this.token.token}`,\r\n          'Content-type': 'application/json; charset=UTF-8'\r\n        }\r\n      })\r\n      temp = await temp.json()\r\n      this.datos = temp.resul\r\n    },\r\n    async leer_campos () {\r\n      const uri = `https://fp-control.herokuapp.com/api/${this.tabla}/campos`\r\n      // console.log(uri)\r\n      let temp = await fetch(uri, {\r\n        method: 'GET',\r\n        headers: {\r\n          authorization: `bearer ${this.token.token}`,\r\n          'Content-type': 'application/json; charset=UTF-8'\r\n        }\r\n      })\r\n      // console.log(temp)\r\n      temp = await temp.json()\r\n      temp = temp.fields\r\n      delete temp.pass\r\n      // console.log('campo ', temp)\r\n      // this.titulos = temp.fields\r\n      this.titulos = Object.keys(temp)\r\n      // console.log('titulos', this.titulos)\r\n      // this.titulos = ['t1', 't2', 't3']\r\n      // console.log(`campos ${this.titulos}`)\r\n    },\r\n    async editar_elemento (elemento) {\r\n      const element = await JSON.stringify(elemento)\r\n      // console.log(`editar ${element}`)\r\n      // console.log(this.edits)\r\n      // console.log(this.deletes)\r\n      // console.log(elemento)\r\n      this.$router.push({ name: 'elemento', params: { tabla: this.tabla, existe: element, editar: this.edits, borrar: this.deletes } })\r\n      // llamara funcion para editar ese elemento\r\n    },\r\n    async eliminar_elemento (elemento) {\r\n      // console.log('eliminar')\r\n      // console.log(elemento)\r\n      // console.log(this.tabla)\r\n      const uri = `https://fp-control.herokuapp.com/api/${this.tabla}`\r\n      let temp = { id: elemento.id }\r\n      temp = { campos: temp }\r\n      const res = await fetch(uri, {\r\n        method: 'DELETE',\r\n        headers: {\r\n          authorization: `bearer ${this.token.token}`,\r\n          'Content-type': 'application/json; charset=UTF-8'\r\n        },\r\n        body: JSON.stringify(temp)\r\n      })\r\n      if (res.status === 200) {\r\n        // this.$router.push({ name: 'lista', params: { tabla: this.tabla, editar: this.editar, borrar: this.editar } })\r\n        this.load()\r\n      }\r\n    },\r\n    cambiar_botones () {\r\n      if (this.editar === 'true') {\r\n        this.edits = true\r\n      }\r\n      if (this.borrar === 'true') {\r\n        this.deletes = true\r\n      }\r\n    },\r\n    get_token () {\r\n      let token = localStorage.getItem('control')\r\n      token = JSON.parse(token)\r\n      if (!token) {\r\n        // this.load()\r\n        this.$router.push('/')\r\n      }\r\n      // console.log(token)\r\n      if (token.rol === 'admin' || token.rol === 'secretaria') {\r\n        this.creador = true\r\n      }\r\n      this.token = token\r\n    },\r\n    async load () {\r\n      try {\r\n        this.elemento_nombre = this.tabla.slice(0, -1)\r\n        await this.get_token()\r\n        this.cambiar_botones()\r\n        await this.leer_campos()\r\n        await this.leer_elementos()\r\n      } catch {\r\n        console.log('')\r\n      }\r\n    }\r\n  },\r\n  async mounted () {\r\n    this.load()\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n</style>\r\n","import { render } from \"./ListaDatos.vue?vue&type=template&id=8bc8cc92\"\nimport script from \"./ListaDatos.vue?vue&type=script&lang=js\"\nexport * from \"./ListaDatos.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\SOC\\\\Desktop\\\\practicas_final\\\\soc_proyecto\\\\front\\\\vue_practicas\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./ListaView.vue?vue&type=template&id=7e1a2e28\"\nimport script from \"./ListaView.vue?vue&type=script&lang=js\"\nexport * from \"./ListaView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\SOC\\\\Desktop\\\\practicas_final\\\\soc_proyecto\\\\front\\\\vue_practicas\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementBlock","key","$data","_createElementVNode","_createVNode","_component_lista_datos","tabla","nombre","editar","borrar","onClick","$options","_ctx","_toDisplayString","_Fragment","_renderList","titulo","index","_hoisted_5","dato","_hoisted_7","_hoisted_8","name","props","required","default","data","edits","deletes","titulos","datos","token","elemento_nombre","creador","methods","async","uri","this","temp","fetch","method","headers","authorization","json","resul","fields","pass","Object","keys","elemento","element","JSON","stringify","$router","push","params","existe","id","campos","res","body","status","load","cambiar_botones","get_token","localStorage","getItem","parse","rol","slice","leer_campos","leer_elementos","console","log","__exports__","s_tabla","tablas","components","ListaDatos","watch","render"],"sourceRoot":""}